<table id="summarySection{{index}}" width="100%" align="center"
        class="summaryViewNoGrid dataTable">
    <tr>
        <th align="left"  class="heading">
            functionalizing entity
        </th>
    </tr>
    <tr ng-repeat="(key, entityTypes) in $parent.functionalizingentity">
        <td>
            <!--<a href="{{key}}"></a> not being used -->
            <div class="characterization" ng-bind-html="key | newlines">{{key}}</div>
            <table width="100%" align="center" class="summaryViewNoGrid"
                   style="background-color:#dbdbdb;" ng-repeat="entityType in entityTypes">
                <tr>
                    <td>
                        <table class="summaryViewNoGrid" width="100%" align="center" style="background-color:#F5F5f5;">
                            <tr ng-if="entityType.Name != ''">
                                <th scope="row" class="cellLabel" width="10%">
                                    Name
                                </th>
                                <td style="width:40em;" ng-bind-html="entityType.Name | newlines">
                                    {{entityType.Name}}
                                </td>
                            </tr>
                            <tr ng-if="entityType.pubChemID != ''">
                                <th scope="row" class="cellLabel" width="10%">
                                    PubChem ID
                                </th>
                                <td>
                                    <a href="{{entityType.pubChemLink}}"
                                       target="caNanoLab - View PubChem" ng-bind-html="entityType.pubChemID | newlines">{{entityType.pubChemID}}
                                    </a> &nbsp;(
                                    <span ng-bind-html="entityType.pubChemDS | newlines">{{entityType.pubChemDS}}</span>
                                    )
                                </td>
                            </tr>
                            <tr ng-if="entityType.value != ''">
                                <th scope="row" class="cellLabel" width="10%">
                                    Amount
                                </th>
                                <td>
                                    <span ng-bind-html="entityType.value | newlines">{{entityType.value}}</span>
                                    <span ng-bind-html="entityType.valueUnit | newlines">{{entityType.valueUnit}}</span>
                                </td>
                            </tr>
                            <tr ng-if="entityType.MolecularFormulaDisplayName != ''">
                                <th scope="row" class="cellLabel" width="10%">
                                    Molecular Formula
                                </th>
                                <td style="word-wrap: break-word; max-width: 280px;" ng-bind-html="entityType.MolecularFormulaDisplayName | newlines">
                                    {{entityType.MolecularFormulaDisplayName}}
                                </td>
                            </tr>
                            <!--                            <c:choose>
                                                            <c:when test="${!empty entityDetailPage}">
                                                                <tr>
                                                                    <th scope="row" class="cellLabel" width="10%">
                                                                        Properties
                                                                    </th>
                                                                    <td>
                                                                        <c:set var="functionalizingEntity" value="${functionalizingEntity}"
                                                                               scope="session" />
                                                                        <jsp:include page="${entityDetailPage}">
                                                                            <jsp:param name="summary" value="true" />
                                                                        </jsp:include>
                                                                    </td>
                                                                </tr>
                                                            </c:when>
                                                            <c:otherwise>
                                                                <c:if test="${functionalizingEntity.withProperties }">
                                                                    <tr>
                                                                        <th scope="row" class="cellLabel" width="10%">
                                                                            Properties
                                                                        </th>
                                                                        <td>
                                                                            <%
                                                                            String detailPage = gov.nih.nci.cananolab.restful.sample.InitCompositionSetup
                                                                            .getInstance().getDetailPage(
                                                                            (String) pageContext
                                                                            .getAttribute("entityType"),
                                                                            "functionalizingEntity");
                                                                            pageContext.setAttribute("detailPage", detailPage);
                                                                            %>
                                                                            <c:set var="functionalizingEntity"
                                                                                   value="${functionalizingEntity}" scope="session" />
                                                                            <jsp:include page="${detailPage}">
                                                                                <jsp:param name="summary" value="true" />
                                                                            </jsp:include>
                                                                        </td>
                                                                    </tr>
                                                                </c:if>
                                                            </c:otherwise>   -->
                            <tr ng-if="entityType.isWithProperties != ''">
                                <td class="cellLabel" width="10%">
                                    Properties
                                </td>
                                <td colspan="2">
                                    <ng-include src="entityType.detailsPage"></ng-include>
                                </td>
                            </tr>
                            <tr ng-if="entityType.Functions != ''">
                                <th scope="row" class="cellLabel" width="10%" valign="top">
                                    Function(s)
                                </th>
                                <td>
                                    <ng-include src="'/caNanoLab/views/sample/composition/functionalizingentity/functionView.html'"></ng-include>
                                </td>
                            </tr>
                            <tr ng-if="entityType.ActivationMethod != ''">
                                <th scope="row" class="cellLabel" width="10%">
                                    Activation Method
                                </th>
                                <td ng-bind-html="entityType.ActivationMethod | newlines">
                                    {{entityType.ActivationMethod}}
                                </td>
                            </tr>
                            <tr ng-if="entityType.description != ''">
                                <th scope="row" class="cellLabel" width="10%">
                                    Description
                                </th>
                                <td ng-bind-html="entityType.description | newlines">
                                </td>
                            </tr>
                            <tr ng-if="entityType.Files.length > 0">
                                <th class="cellLabel" width="10%">
                                    Files
                                </th>
                                <td>
                                    <ng-include src="'/caNanoLab/views/sample/composition/fileView.html'"></ng-include>
                                </td>
                            </tr>
                        </table>
                    </td>
                </tr>
                
            </table>
            <br/>
        </td>
    </tr>
</table>